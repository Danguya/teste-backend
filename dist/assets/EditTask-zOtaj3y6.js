import{k as C,A as S,r as l,j as e}from"./index-DIdqL2Lk.js";import{u as v,D as k,a as E,b as D,c as A}from"./index-CNf8jVGw.js";import{o as F,s as f,u as I,t as q}from"./zod-DqG4nR4Q.js";import{T as x,B as h}from"./Button-DnuDHBhs.js";function B(){const n=C();return v({mutationFn:async({taskId:r,title:a,description:s})=>{await S.put(`/tasks/${r}`,{title:a,description:s})},onSuccess:()=>{n.invalidateQueries({queryKey:["tasks"]})}})}const M=F({title:f().nonempty(),description:f().nonempty()});function P({open:n,handleClose:r,taskId:a,initialTitle:s,initialDescription:i}){const[g,u]=l.useState(s),[j,c]=l.useState(i),{register:m,handleSubmit:y,formState:{errors:o},reset:d}=I({resolver:q(M)}),{mutate:T}=B();l.useEffect(()=>{u(s),c(i)},[s,i]);const p=()=>{r(),d()},b=t=>{T({taskId:a,title:t.title,description:t.description}),r(),d()};return e.jsxs(k,{open:n,onClose:p,children:[e.jsx(E,{children:"Editar Tarefa"}),e.jsx(D,{children:e.jsxs("form",{onSubmit:y(b),children:[e.jsx(x,{autoFocus:!0,margin:"dense",label:"Title",fullWidth:!0,...m("title"),error:!!o.title,helperText:o.title?"Informe um título.":"",value:g,onChange:t=>u(t.target.value)}),e.jsx(x,{margin:"dense",label:"Description",fullWidth:!0,...m("description"),error:!!o.description,helperText:o.description?"Informe uma descrição.":"",value:j,onChange:t=>c(t.target.value)}),e.jsxs(A,{children:[e.jsx(h,{type:"button",onClick:p,children:"Cancelar"}),e.jsx(h,{type:"submit",color:"primary",children:"Salvar Alterações"})]})]})})]})}export{P as default};
